---
date: 2016-03-09T19:56:50+01:00
title: Architecture and components
---

The Vamp platform consists of server- and client-side components. Before installing, it is helpful to understand the role of each component and its preferred location in a typical architecture.

## Architecture

{{< note title="note!" >}}
The below diagram should be used more as an overview than required architecture. Here we also include Mesos/Marathon stack even though it is not a hard dependency.

{{< /note >}}

![diagram](http://vamp.io/img/vamp_arch.svg)


## Components

### Vamp

The main API endpoint, business logic and service coordinator. Vamp talks to the configured container manager (Docker, Marathon, Kubernetes etc.) and synchronizes it with Vamp Gateway Agent via ZooKeeper, etcd or Consul. Vamp uses Elasticsearch for artifact persistence and to store events (e.g. changes in deployments).

### Vamp Gateway Agent (VGA)

* Reads the HAProxy configuration from ZooKeeper, etcd or Consul and reloads HAProxy on each configuration change with as close to zero client request interruptions as possible. 
* Reads the logs from HAProxy over socket and pushes them to Logstash (not presented on the diagram above) over UDP. 
* Handles and recovers from ZooKeeper, etcd, Consul and Logstash outages without interrupting the HAProxy process and client requests.

>**Note** VGA requires HAProxy. At the moment HAProxy configuration is fully generated by Vamp, that means VGA requires a dedicated HAProxy installation. Later we plan to support combining custom (non-Vamp) configuration as well.

More detailed information about building VGA from source and configuration can be found on the [project page](https://github.com/magneticio/vamp-gateway-agent).

### Vamp UI

The graphical web interface for managing Vamp in a web browser. Packaged with Vamp.

### Vamp CLI

The command line interface for managing Vamp and providing integration with (shell) scripts.
