---
date: 2017-01-09T09:00:00+00:00
title: Troubleshooting
menu:
  main:
    parent: "Documentation"
    name: "Troubleshoot"
    weight: 50
draft: true
---

The pointers below will help debug and resolve common issues in case Vamp is not running as expected. The most common problems we encounter are:

| Problem         | Description           | Probable cause    
| ----------------- |:-----------------:|:----------------:| 
| [Metrics not displaying](/documentation/troubleshoot/#metrics-not-displaying) |   For example, in the Vamp UI, health is reporting 0%   |  Workflows not running,  incorrect Logstash configuration
| [General strange behaviour](/documentation/troubleshoot/#general-strange-behaviour) |      |  System cleanup required
| [It just doesn't work](/documentation/troubleshoot/#it-just-doesn-t-work) |      |  incorrect version installed 

## Metrics not displaying
The Vamp UI reports status information and draws graphs based on events generated by the health and metrics workflows. These events are read from the Elasticsearch indices _vamp-pulse-health-{date}_ and _vamp-pulse-metrics-{date}_. To successfully generate and store the required events, the health and metrics workflows need access to HAProxy logs, which are collected and stored in the Elasticsearch index _logstash-{date}_ by Vamp Gateway Agent (VGA) and Logstash.

![](/images/diagram/events-and-metrics-flow.svg)

If the Vamp UI is not displaying status data as expected, check that the health and metrics workflows are running, and make sure that all the Elasticsearch indices are being created and updated.

1. Are the metrics and health workflows running?  
  * Check the workflow `status` from the Vamp API:  
  `GET <vamp url>/api/v1/workflows/health`  
  `GET <vamp url>/api/v1/workflows/metrics`
  * If the resource could not be found or the status is set to `suspended`, restart the workflow.  
  * Re-install?


2. Are the required Elasticsearch indices created and being updated?  
  * List all Elasticsearch indices and check for those required by the Vamp UI:  
  `GET <elasticsearch url>/_cat/indices?v`  
    HAProxy logs: _logstash-{date}_     
    Health workflow events: _vamp-pulse-health-{date}_  
    Metrics workflow events: _vamp-pulse-metrics-{date}_  
   
  * If there are no HAProxy logs (index _logstash-{date}_ )  
  check the logstash configuration  
  check the elasticsearch installation and configuration  
  what if I'm not using elasticsearch??

## General strange behaviour

- stop and remove stale container images

## It just doesn't work

- which version are you running?
- is everything running (check info in API or UI)?
- check if components can access each other (from inside the container)
- Are there errors in the Vamp log?

## Reporting issues

If you've tried the above steps and are still stuck, then let us know. We accept bug reports and pull requests on the GitHub repo for each project ([github.com - magneticio](https://github.com/magneticio)).

{{< note >}}                                  
* **Questions about how to use Vamp?** Please [check the documentation first](/documentation/).
* To suggest a change or new feature, [create a GitHub issue](https://github.com/magneticio/vamp/issues) and tag it with "feature proposal"
{{< /note >}}

When reporting issues, please include the following details:

- Description of issue.
- Vamp info, from the API: `GET <vamp url>/api/v1/info`
- Vamp config, from the API; `GET <vamp url>/api/v1/config`
- Reproduction steps.
- Which orchestrator are you using, DC/OS, Kubernetes, Rancher, etc.
- Log output from Vamp and it's various components. You can get these from the `docker logs` command on the relevant containers.
- Any other information that you might consider important.